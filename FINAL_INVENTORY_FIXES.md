# üîß –§–ò–ù–ê–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–û–ë–õ–ï–ú

**–î–∞—Ç–∞:** $(date)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

## üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è `<app.models.models.User object at 0x...>` –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω –≤ –º–æ–¥–µ–ª–∏ `Inventory` 
- –ü–æ–ª–µ `owner` (—Å—Ç—Ä–æ–∫–∞) –∏ —Å–≤—è–∑—å `owner` (User) –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª–∏
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª —Å–≤—è–∑—å –≤ `owner_user`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ —Ä–æ—É—Ç–µ—Ä–µ

```python
# –í models.py:
class Inventory(Base):
    owner = Column(Text)  # –°—Ç—Ä–æ–∫–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    owner_user_id = Column(Integer, ForeignKey("users.id"))
    
    # –û—Ç–Ω–æ—à–µ–Ω–∏—è
    owner_user = relationship("User", foreign_keys=[owner_user_id])  # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ!
    created_by = relationship("User", foreign_keys=[created_by_user_id])

# –í inventory.py:
for item in inventory_items_raw:
    if hasattr(item, 'owner_user') and item.owner_user:
        if item.owner_user.vk_id:
            # VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–Ω–æ–µ –∏–º—è
            display_owner = f"{item.owner_user.first_name} {item.owner_user.last_name}".strip()
        else:
            # –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º username
            display_owner = item.owner_user.username
        item.owner = display_owner
```

### 2. ‚úÖ –ü—É—Å—Ç–æ–π —Ñ–∏–ª—å—Ç—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –æ—Ç—á–µ—Ç–∞—Ö
**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∏–ª—å—Ç—Ä –ø–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –ø–æ–∫–∞–∑—ã–≤–∞–ª "–í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏" –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –≤–∑–Ω–æ—Å–æ–≤ (–≤—Å–µ `is_approved = false`)

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –£–±—Ä–∞–ª —Ñ–∏–ª—å—Ç—Ä `is_approved = true` –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–≤–∫–ª—é—á–∞—è –Ω–µ–æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–û–¥–æ–±—Ä–∏—Ç—å –≤—Å–µ –≤–∑–Ω–æ—Å—ã" –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

```python
# –ë–´–õ–û:
contributors_list_query = text("""
    SELECT DISTINCT COALESCE(contributor_name, description) as contributor 
    FROM budget 
    WHERE type = :type AND is_approved = :is_approved  # –ü—Ä–æ–±–ª–µ–º–∞ –∑–¥–µ—Å—å!
""")

# –°–¢–ê–õ–û:
contributors_list_query = text("""
    SELECT DISTINCT COALESCE(contributor_name, description) as contributor 
    FROM budget 
    WHERE type = :type  # –£–±—Ä–∞–ª —Ñ–∏–ª—å—Ç—Ä is_approved
""")
```

### 3. ‚úÖ –û—à–∏–±–∫–∞ "Not Found" –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–æ—É—Ç `/dictionaries` –Ω–µ –Ω–∞–π–¥–µ–Ω

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å —Ä–æ—É—Ç–∞ —Å `/dictionaries` –Ω–∞ `/admin/dictionaries`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ POST —Ä–æ—É—Ç—ã

```python
# –ë–´–õ–û:
@router.get("/dictionaries", response_class=HTMLResponse)

# –°–¢–ê–õ–û:
@router.get("/admin/dictionaries", response_class=HTMLResponse)
```

## üéØ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –®–∞–≥ 1: –û–¥–æ–±—Ä–∏—Ç—å –≤—Å–µ –≤–∑–Ω–æ—Å—ã (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å: `/admin`
2. –ù–∞–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –≤–∑–Ω–æ—Å–∞—Ö
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **"–û–¥–æ–±—Ä–∏—Ç—å –≤—Å–µ –≤–∑–Ω–æ—Å—ã"**
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
1. **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å** (`/inventory`) - –≤–ª–∞–¥–µ–ª—å—Ü—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–∞–∫ –∏–º–µ–Ω–∞, –∞ –Ω–µ –æ–±—ä–µ–∫—Ç—ã
2. **–û—Ç—á–µ—Ç—ã** (`/reports`) - —Ñ–∏–ª—å—Ç—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–º–µ–Ω–∞
3. **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏** (`/admin/dictionaries`) - –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å - –≤–ª–∞–¥–µ–ª–µ—Ü –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –≤ –æ—Ç—á–µ—Ç–∞—Ö - –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞—Ö - –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–±–ª–µ–º

| –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å | –†–µ—à–µ–Ω–∏–µ |
|----------|--------|---------|
| `<User object>` –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ —Å–≤—è–∑—å owner_user |
| –ü—É—Å—Ç–æ–π —Ñ–∏–ª—å—Ç—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ | ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –£–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä is_approved |
| Not Found –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å —Ä–æ—É—Ç–∞ |

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–í–°–ï –û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´!**

- ‚úÖ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–º–µ–Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç  
- ‚úÖ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –≤—Å–µ—Ö –≤–∑–Ω–æ—Å–æ–≤ —Ñ–∏–ª—å—Ç—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ** 