# Valravn Project Development Rules

## üéØ –ü–†–û–ï–ö–¢: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—é–¥–∂–µ—Ç–æ–º –∫–ª—É–±–∞ "Valravn"
FastAPI + PostgreSQL + Jinja2 + Tailwind CSS + VK OAuth

---

## üìÅ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò –°–¢–†–£–ö–¢–£–†–ê

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **Backend**: FastAPI —Å –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Ä–æ—É—Ç–µ—Ä–æ–≤
- **Database**: PostgreSQL + SQLAlchemy ORM
- **Frontend**: Jinja2 —à–∞–±–ª–æ–Ω—ã + Tailwind CSS + Alpine.js
- **Auth**: JWT + bcrypt + VK OAuth (VK ID SDK)
- **Deployment**: Render.com + Docker

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:
```
app/
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îú‚îÄ‚îÄ auth.py             # –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
‚îú‚îÄ‚îÄ database.py         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ vk_oauth.py         # VK OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ models.py       # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ schemas.py      # Pydantic —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ routers/            # –ú–æ–¥—É–ª—å–Ω—ã–µ —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth.py        # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ admin.py       # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ budget.py      # –ë—é–¥–∂–µ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ inventory.py   # –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
‚îú‚îÄ‚îÄ templates/          # Jinja2 —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ base.html      # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ admin/         # –ê–¥–º–∏–Ω —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ inventory/     # –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å —à–∞–±–ª–æ–Ω—ã
‚îî‚îÄ‚îÄ static/            # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ css/style.css  # Tailwind CSS
    ‚îú‚îÄ‚îÄ js/main.js     # Alpine.js + JS
    ‚îî‚îÄ‚îÄ uploads/       # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

---

## üîê –°–ò–°–¢–ï–ú–ê –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò

### –ú–µ—Ç–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: username + password + —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥
2. **VK OAuth**: —á–µ—Ä–µ–∑ VK ID SDK —Å whitelist –ø—Ä–æ–≤–µ—Ä–∫–æ–π
3. **JWT —Ç–æ–∫–µ–Ω—ã**: –≤ HTTP-only cookies

### –ü—Ä–∞–≤–∏–ª–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
- **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π `get_current_user_from_cookie` –¥–ª—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü
- **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π `get_admin_user` –¥–ª—è –∞–¥–º–∏–Ω —Ñ—É–Ω–∫—Ü–∏–π
- **–ù–ò–ö–û–ì–î–ê** –Ω–µ —Ö—Ä–∞–Ω–∏ –ø–∞—Ä–æ–ª–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ - —Ç–æ–ª—å–∫–æ bcrypt hash
- **VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –º–æ–≥—É—Ç –∏–º–µ—Ç—å `hashed_password = NULL`

### VK OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ VK whitelist –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê
def create_or_update_vk_user(db, vk_id, first_name, last_name, avatar_url, email):
    whitelist_entry = db.query(VKWhitelist).filter(VKWhitelist.vk_id == vk_id).first()
    if not whitelist_entry:
        raise HTTPException(status_code=403, detail="VK ID –Ω–µ –≤ whitelist")
```

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- **users**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–æ–±—ã—á–Ω—ã–µ + VK)
- **budget**: –¥–æ—Ö–æ–¥—ã/—Ä–∞—Å—Ö–æ–¥—ã —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π
- **inventory**: –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∫–ª—É–±–∞
- **vk_whitelist**: —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **account_link_requests**: –∑–∞–ø—Ä–æ—Å—ã —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î:
- **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π `Depends(get_db)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
- **–í–°–ï–ì–î–ê** –¥–µ–ª–∞–π `db.commit()` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π `db.refresh(object)` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
- **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∑–∞–±—ã–≤–∞–π `db.close()` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ dependency)

### –ú–∏–≥—Ä–∞—Ü–∏–∏:
- –°–æ–∑–¥–∞–≤–∞–π —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑ `models.Base.metadata.create_all(bind=engine)`
- –°–ª–æ–∂–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–Ω–æ—Å–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ SQL —Ñ–∞–π–ª—ã
- –ò—Å–ø–æ–ª—å–∑—É–π `CREATE TABLE IF NOT EXISTS` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üé® FRONTEND –†–ê–ó–†–ê–ë–û–¢–ö–ê

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **Tailwind CSS**: –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ (–∫–∞—Å—Ç–æ–º–Ω–∞—è —Ç–µ–º–∞ `valravn`)
- **Alpine.js**: –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **Jinja2**: –¥–ª—è —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏–∏
- **Font Awesome**: –¥–ª—è –∏–∫–æ–Ω–æ–∫

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ Valravn:
```css
'valravn': {
    50: '#f0f9ff',
    500: '#0ea5e9', 
    600: '#0284c7',
    900: '#0c4a6e'
}
```

### –ü—Ä–∞–≤–∏–ª–∞ —à–∞–±–ª–æ–Ω–æ–≤:
- **–í–°–ï–ì–î–ê** –Ω–∞—Å–ª–µ–¥—É–π –æ—Ç `base.html`
- **–í–°–ï–ì–î–ê** –ø—Ä–æ–≤–µ—Ä—è–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é: `{% if current_user %}`
- **–í–°–ï–ì–î–ê** –∏—Å–ø–æ–ª—å–∑—É–π CSRF –∑–∞—â–∏—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ö
- **–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: –∏—Å–ø–æ–ª—å–∑—É–π responsive –∫–ª–∞—Å—Å—ã Tailwind

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
```html
<!-- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ -->
<button class="bg-valravn-600 hover:bg-valravn-700 text-white px-4 py-2 rounded-lg">

<!-- –§–æ—Ä–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π -->
<form method="post" class="space-y-4" x-data="formHandler()">

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div x-show="showModal" class="fixed inset-0 bg-gray-600 bg-opacity-50">
```

---

## üìä –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê

### –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã:

#### 1. –ë—é–¥–∂–µ—Ç (`budget.py`):
- **–¢–∏–ø—ã –∑–∞–ø–∏—Å–µ–π**: "–í–∑–Ω–æ—Å", "–†–∞—Å—Ö–æ–¥", "–î–æ—Ö–æ–¥"
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è**: –≤—Å–µ –≤–∑–Ω–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–¥–º–∏–Ω–æ–º
- **–°–∫—Ä–∏–Ω—à–æ—Ç—ã**: –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–°–≤—è–∑—ã–≤–∞–Ω–∏–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### 2. –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (`inventory.py`):
- **–¢–∏–ø—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤**: –ª–∏—á–Ω—ã–µ –∏ –∫–ª—É–±–Ω—ã–µ
- **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏**: –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- **–ê—Ä—Ö–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**: —Ä–µ–≥–∏–æ–Ω, –º–µ—Å—Ç–æ –Ω–∞—Ö–æ–¥–∫–∏, –∑–∞—Ö–æ—Ä–æ–Ω–µ–Ω–∏–µ
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –ø—Ä–µ–¥–º–µ—Ç—ã

#### 3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (`admin.py`):
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**: —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–π, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- **VK Whitelist**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è**: –æ–¥–æ–±—Ä–µ–Ω–∏–µ –≤–∑–Ω–æ—Å–æ–≤ –∏ –∑–∞–ø–∏—Å–µ–π
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –æ—Ç—á–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üîß –†–ê–ó–†–ê–ë–û–¢–ö–ê –ò –î–ï–ü–õ–û–ô

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
DATABASE_URL=postgresql://...
SECRET_KEY=your-secret-key
SECRET_REGISTRATION_CODE=valravn2024

# VK OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)
VK_APP_ID=your_app_id
VK_APP_SECRET=your_app_secret
VK_SERVICE_TOKEN=your_service_token
VK_REDIRECT_URI=https://your-domain.com/auth/login

# –§–∞–π–ª—ã
MAX_FILE_SIZE_MB=10
UPLOAD_DIR=app/static/uploads
```

### –î–µ–ø–ª–æ–π –Ω–∞ Render.com:
- **Build Command**: `pip install -r requirements.txt`
- **Start Command**: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
- **PostgreSQL**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `render.yaml`

---

## üö® –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò BEST PRACTICES

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**: –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- **VK Whitelist**: —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **JWT –≤ HTTP-only cookies**: –∑–∞—â–∏—Ç–∞ –æ—Ç XSS
- **Bcrypt hashing**: –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **CSRF –∑–∞—â–∏—Ç–∞**: –≤–æ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ö

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
```python
try:
    # –û–ø–µ—Ä–∞—Ü–∏—è —Å –ë–î
    db.commit()
except Exception as e:
    db.rollback()
    raise HTTPException(status_code=500, detail=str(e))
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
import logging
logging.info(f"User {user.username} performed action")
```

---

## üìù CODING STANDARDS

### Python –∫–æ–¥:
- **PEP 8** —Å—Ç–∏–ª—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- **Type hints** –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **Docstrings** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **Async/await** –¥–ª—è I/O –æ–ø–µ—Ä–∞—Ü–∏–π

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:
- **–§—É–Ω–∫—Ü–∏–∏**: `snake_case`
- **–ö–ª–∞—Å—Å—ã**: `PascalCase`  
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã**: `UPPER_CASE`
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**: `snake_case`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ—É—Ç–æ–≤:
```python
@router.get("/endpoint", response_class=HTMLResponse)
async def endpoint_name(
    request: Request,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user_from_cookie)
):
    return templates.TemplateResponse("template.html", {
        "request": request,
        "current_user": current_user
    })
```

---

## üéØ –°–ü–ï–¶–ò–§–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê –ü–†–û–ï–ö–¢–ê

### VK OAuth:
- **–¢–û–õ–¨–ö–û VK ID SDK** (—Å—Ç–∞—Ä—ã–π OAuth2 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- **Whitelist –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è –≤—Å–µ—Ö VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Ç–æ–∫–µ–Ω** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ** –ø–æ email –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏

### –§–∞–π–ª–æ–≤—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏:
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 10MB
- **–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è, –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –±—é–¥–∂–µ—Ç–∞
- **–ü–∞–ø–∫–∏**: `app/static/uploads/inventory/`, `app/static/uploads/screenshots/`

### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è:
- **–†—É—Å—Å–∫–∏–π —è–∑—ã–∫** –¥–ª—è –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **–†—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞** –∏–∑ VK –ø—Ä–æ—Ñ–∏–ª–µ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã
- **–î–∞—Ç—ã** –≤ —Ñ–æ—Ä–º–∞—Ç–µ DD.MM.YYYY

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
- **–û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∑–Ω–æ—Å–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- **VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: —Ç–µ –∂–µ –ø—Ä–∞–≤–∞ + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

---

## üîÑ WORKFLOW –†–ê–ó–†–ê–ë–û–¢–ö–ò

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:
1. **–°–æ–∑–¥–∞–π –º–æ–¥–µ–ª—å** –≤ `models/models.py`
2. **–î–æ–±–∞–≤—å —Ä–æ—É—Ç—ã** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª `routers/`
3. **–°–æ–∑–¥–∞–π —à–∞–±–ª–æ–Ω—ã** –≤ `templates/`
4. **–û–±–Ω–æ–≤–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é** –≤ `base.html`
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π** –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ë–î:
1. **–°–æ–∑–¥–∞–π –º–∏–≥—Ä–∞—Ü–∏—é** SQL —Ñ–∞–π–ª
2. **–û–±–Ω–æ–≤–∏ –º–æ–¥–µ–ª–∏** SQLAlchemy
3. **–ü—Ä–æ–≤–µ—Ä—å** –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π** –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ü—Ä–∏ –¥–µ–ø–ª–æ–µ:
1. **–ü—Ä–æ–≤–µ—Ä—å** –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **–í—ã–ø–æ–ª–Ω–∏** –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π** VK OAuth
4. **–ü—Ä–æ–≤–µ—Ä—å** –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤

---

## ‚ö° –ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
uvicorn app.main:app --reload

# –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
psql -d database < migration.sql

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### –û—Ç–ª–∞–¥–∫–∞ VK OAuth:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
curl https://your-domain.com/test-routes

# –õ–æ–≥–∏ VK –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
grep "VK Auth" logs/app.log
```

---

## üé≠ –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –§–ò–ß–ò

### –†—É—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–º–µ–Ω:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –∏–º–µ–Ω –Ω–∞ —Ä—É—Å—Å–∫–∏–µ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É `users` –∏ `vk_whitelist`
- –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ VK –∏ –æ–±—ã—á–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –ø–æ email
- –¢–∞–±–ª–∏—Ü–∞ `account_link_requests` –¥–ª—è —Ä—É—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å–≤—è–∑—ã–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞:
- –í—Å–µ –≤–∑–Ω–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ò—Å—Ç–æ—Ä–∏—è –æ–¥–æ–±—Ä–µ–Ω–∏–π —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

---

**üõ°Ô∏è –ü–û–ú–ù–ò: –≠—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ –∫–ª—É–±–∞ - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ç–æ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã!** 